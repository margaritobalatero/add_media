{
  "version": 3,
  "sources": ["../../../app/routes/dashboard.jsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\dashboard.jsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\dashboard.jsx\");\n}\n// REMIX HMR END\n\n// dashboard.jsx\nimport { useLoaderData, Form } from \"@remix-run/react\";\nimport { useState } from \"react\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { connectDB, Item } from \"../utils/db.server.js\";\nexport async function loader({\n  request\n}) {\n  await connectDB();\n  const url = new URL(request.url);\n  const search = url.searchParams.get(\"q\") || \"\";\n  const items = await Item.find(search ? {\n    caption: new RegExp(search, \"i\")\n  } : {}).sort({\n    _id: -1\n  });\n  return json({\n    items,\n    search\n  });\n}\nexport async function action({\n  request\n}) {\n  await connectDB();\n  const formData = await request.formData();\n  const _id = formData.get(\"_id\");\n  const actionType = formData.get(\"action\");\n  if (actionType === \"delete\" && _id) await Item.findByIdAndDelete(_id);\n  if (actionType === \"update\" && _id) {\n    await Item.findByIdAndUpdate(_id, {\n      caption: formData.get(\"caption\"),\n      mediaUrl: formData.get(\"mediaUrl\")\n    });\n  }\n  return redirect(\"/dashboard\");\n}\nfunction getYouTubeEmbedUrl(url) {\n  try {\n    const match = url.match(/(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:watch\\?v=|embed\\/)|youtu\\.be\\/)([\\w\\-]{11})/);\n    return match ? `https://www.youtube.com/embed/${match[1]}` : null;\n  } catch {\n    return null;\n  }\n}\nexport default function Dashboard() {\n  _s();\n  const {\n    items,\n    search\n  } = useLoaderData();\n  const [editingId, setEditingId] = useState(null);\n  const [detailItem, setDetailItem] = useState(null);\n  return <div className=\"container py-4\">\r\n      {/* Bootstrap CDN */}\r\n      <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-ENjdO4Dr2bkBIFxQpeoYz1HIr2z5e2e1sFidk8zZ4yY1pG1lEN5Kq0p2d6Y5p3yz\" crossOrigin=\"anonymous\" />\n      \r\n\r\n      <h1 className=\"mb-4 text-center\">\uD83C\uDFA0 Media Grid</h1>\r\n\r\n      {/* Search */}\r\n      <Form method=\"get\" className=\"d-flex mb-4\">\r\n        <input type=\"text\" name=\"q\" defaultValue={search} placeholder=\"Search caption...\" className=\"form-control me-2\" />\n        \r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Search\r\n        </button>\r\n      </Form>\r\n\r\n      {/* Grid */}\r\n      <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4\">\r\n        {items.map(item => {\n        const youtubeEmbed = getYouTubeEmbedUrl(item.mediaUrl);\n        const isEditing = editingId === item._id;\n        return <div className=\"col\" key={item._id}>\r\n              <div className=\"card h-100 shadow-sm d-flex flex-column\">\r\n                <div className=\"ratio ratio-16x9\">\r\n                  {item.type === \"image\" ? <img src={item.mediaUrl} className=\"card-img-top object-fit-cover\" alt={item.caption} /> : youtubeEmbed ? <iframe src={youtubeEmbed} allowFullScreen title={item.caption}>\n                  </iframe> : <video src={item.mediaUrl} controls className=\"w-100 h-100\">\n                  </video>}\r\n                </div>\r\n\r\n                <div className=\"card-body d-flex flex-column\">\r\n                  <h5 className=\"card-title\">{item.caption}</h5>\r\n\r\n                  <div className=\"mt-auto d-flex flex-wrap gap-2\">\r\n                    {/* Delete */}\r\n                    <Form method=\"post\" className=\"d-inline\">\r\n                      <input type=\"hidden\" name=\"_id\" value={item._id} />\r\n                      <input type=\"hidden\" name=\"action\" value=\"delete\" />\r\n                      <button className=\"btn btn-danger btn-sm\">Delete</button>\r\n                    </Form>\r\n\r\n                    {/* Update */}\r\n                    {isEditing ? <Form method=\"post\" className=\"d-flex flex-column gap-2 flex-grow-1\">\n                      \r\n                        <input type=\"hidden\" name=\"_id\" value={item._id} />\r\n                        <input type=\"hidden\" name=\"action\" value=\"update\" />\r\n                        <input type=\"text\" name=\"caption\" defaultValue={item.caption} className=\"form-control form-control-sm\" required />\n                      \r\n                        <input type=\"text\" name=\"mediaUrl\" defaultValue={item.mediaUrl} className=\"form-control form-control-sm\" required />\n                      \r\n                        <div className=\"d-flex gap-2\">\r\n                          <button className=\"btn btn-success btn-sm\">Save</button>\r\n                          <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={() => setEditingId(null)}>\n                          \r\n                            Cancel\r\n                          </button>\r\n                        </div>\r\n                      </Form> : <button className=\"btn btn-warning btn-sm\" onClick={() => setEditingId(item._id)}>\n                      \r\n                        Update\r\n                      </button>}\r\n\r\n                    <button className=\"btn btn-info btn-sm text-white\" onClick={() => setDetailItem(item)}>\n                      \r\n                      Details\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>;\n      })}\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {detailItem && <div className=\"modal fade show d-block\" style={{\n      background: \"rgba(0,0,0,0.5)\"\n    }} onClick={() => setDetailItem(null)}>\n        \r\n          <div className=\"modal-dialog modal-lg modal-dialog-centered\" onClick={e => e.stopPropagation()}>\n          \r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">{detailItem.caption}</h5>\r\n                <button type=\"button\" className=\"btn-close\" onClick={() => setDetailItem(null)}>\n              </button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                {detailItem.type === \"image\" ? <img src={detailItem.mediaUrl} className=\"img-fluid\" alt={detailItem.caption} /> : getYouTubeEmbedUrl(detailItem.mediaUrl) ? <div className=\"ratio ratio-16x9\">\r\n                    <iframe src={getYouTubeEmbedUrl(detailItem.mediaUrl)} allowFullScreen title={detailItem.caption}>\n                </iframe>\r\n                  </div> : <video src={detailItem.mediaUrl} controls autoPlay className=\"w-100\">\n              </video>}\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button className=\"btn btn-secondary\" onClick={() => setDetailItem(null)}>\n                \r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>}\r\n\r\n      <div className=\"d-flex justify-content-between mt-4\">\r\n        <a href=\"/add\" className=\"btn btn-success\">\r\n          \u2795 Add Media\r\n        </a>\r\n        <a href=\"/login\" className=\"btn btn-outline-secondary\">\r\n          Logout\r\n        </a>\r\n      </div>\r\n    </div>;\n}\n_s(Dashboard, \"QSec/etP5oVt6hWjNvsTwNWLvzw=\", false, function () {\n  return [useLoaderData];\n});\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
